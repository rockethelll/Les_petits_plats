import{searchByTags}from"./searchTag.min.js";import{updateListElement}from"./handleDropdown.min.js";import{updateRecipeSection}from"./mainFilter.min.js";import{recipes}from"../../data/recipes.min.js";const addedTags=new Set;let selectedTags={ingredient:[],appliance:[],ustensil:[]};document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".dropdown-items").forEach((e=>{e.addEventListener("click",(e=>{const t=e.target,n=t.dataset.type;"LI"!==t.tagName||t.classList.contains("selected")||(addTag(t.textContent,n),searchByTags())}))}))}));export function addTag(e,t){if(addedTags.has(e))return;const n=document.querySelector(".tag-container"),s=document.createElement("div");s.classList.add("tag");const d=document.createElement("p");d.textContent=e,addedTags.add(e);const a=document.createElement("img");a.src="./assets/icons/close.svg",s.appendChild(d),s.appendChild(a),n.appendChild(s),s.dataset.type=t,s.addEventListener("click",(()=>{removeTag(s,e,t)})),selectedTags[t].push(e.toLowerCase())}export function removeTag(e,t,n){e.remove(),addedTags.delete(t);const s=selectedTags[n].indexOf(t.toLowerCase());s>-1&&selectedTags[n].splice(s,1),updateListElement(),updateRecipeSection(recipes),searchByTags()}document.addEventListener("DOMContentLoaded",(()=>{setupDropdownFilter("dropdownSearchIngredients","ingredients-list"),setupDropdownFilter("dropdownSearchUstensils","ustensiles-list"),setupDropdownFilter("dropdownSearchAppareils","appareils-list")}));export function setupDropdownFilter(e,t){const n=document.getElementById(e),s=document.getElementById(t);n.addEventListener("input",(()=>{const e=n.value.trim().toLowerCase();Array.from(s.children).forEach((t=>{const n=t.textContent.trim().toLowerCase().includes(e);t.style.display=n?"":"none"}))}))}